2025-10-26 00:25:48.526 +02:00 [INF] Starting OmgekeerdeStemWijzer API
2025-10-26 00:25:48.755 +02:00 [INF] User profile is available. Using 'C:\Users\Msahi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 00:25:48.824 +02:00 [INF] Start processing HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:25:48.829 +02:00 [INF] Sending HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:25:49.015 +02:00 [INF] Received HTTP response headers after 182.4803ms - 200
2025-10-26 00:25:49.026 +02:00 [INF] End processing HTTP request after 204.7404ms - 200
2025-10-26 00:25:49.185 +02:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5295: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
 ---> System.Net.Sockets.SocketException (10048): Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-10-26 00:25:49.205 +02:00 [FTL] Application terminated unexpectedly
System.IO.IOException: Failed to bind to address http://127.0.0.1:5295: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
 ---> System.Net.Sockets.SocketException (10048): Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Users\Msahi\OneDrive\Documenten\OmgekeerdeStemWijzer\OmgekeerdeStemWijzer.Api\Program.cs:line 198
2025-10-26 00:26:09.842 +02:00 [INF] Starting OmgekeerdeStemWijzer API
2025-10-26 00:26:10.079 +02:00 [INF] User profile is available. Using 'C:\Users\Msahi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 00:26:10.151 +02:00 [INF] Start processing HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:26:10.156 +02:00 [INF] Sending HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:26:10.327 +02:00 [INF] Received HTTP response headers after 168.9621ms - 200
2025-10-26 00:26:10.337 +02:00 [INF] End processing HTTP request after 189.0356ms - 200
2025-10-26 00:26:10.371 +02:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5295: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
 ---> System.Net.Sockets.SocketException (10048): Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-10-26 00:26:10.386 +02:00 [FTL] Application terminated unexpectedly
System.IO.IOException: Failed to bind to address http://127.0.0.1:5295: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
 ---> System.Net.Sockets.SocketException (10048): Elk socketadres (protocol/netwerkadres/poort) kan normaal slechts één keer worden gebruikt.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Users\Msahi\OneDrive\Documenten\OmgekeerdeStemWijzer\OmgekeerdeStemWijzer.Api\Program.cs:line 198
2025-10-26 00:27:10.670 +02:00 [INF] Starting OmgekeerdeStemWijzer API
2025-10-26 00:27:10.916 +02:00 [INF] User profile is available. Using 'C:\Users\Msahi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 00:27:10.995 +02:00 [INF] Start processing HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:27:10.999 +02:00 [INF] Sending HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:27:11.164 +02:00 [INF] Received HTTP response headers after 161.4695ms - 200
2025-10-26 00:27:11.175 +02:00 [INF] End processing HTTP request after 183.4488ms - 200
2025-10-26 00:27:11.237 +02:00 [INF] Now listening on: https://localhost:7283
2025-10-26 00:27:11.238 +02:00 [INF] Now listening on: http://localhost:5295
2025-10-26 00:27:11.241 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-26 00:27:11.242 +02:00 [INF] Hosting environment: Development
2025-10-26 00:27:11.242 +02:00 [INF] Content root path: C:\Users\Msahi\OneDrive\Documenten\OmgekeerdeStemWijzer\OmgekeerdeStemWijzer.Api
2025-10-26 00:27:16.424 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/ - null null
2025-10-26 00:27:16.490 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/ - 404 0 null 75.8267ms
2025-10-26 00:27:16.494 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7283/, Response status code: 404
2025-10-26 00:27:22.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger - null null
2025-10-26 00:27:22.361 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger - 301 0 null 4.2365ms
2025-10-26 00:27:22.366 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/index.html - null null
2025-10-26 00:27:22.422 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/index.html - 200 null text/html;charset=utf-8 56.1037ms
2025-10-26 00:27:22.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/swagger-ui.css - null null
2025-10-26 00:27:22.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/index.css - null null
2025-10-26 00:27:22.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/swagger-ui-bundle.js - null null
2025-10-26 00:27:22.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/swagger-ui-standalone-preset.js - null null
2025-10-26 00:27:22.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/index.js - null null
2025-10-26 00:27:22.493 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/index.js - 200 null application/javascript;charset=utf-8 11.9916ms
2025-10-26 00:27:22.495 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/index.css - 200 152 text/css 13.6898ms
2025-10-26 00:27:22.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/swagger-ui-standalone-preset.js - 200 77352 text/javascript 24.6968ms
2025-10-26 00:27:22.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/swagger-ui.css - 200 23647 text/css 24.8395ms
2025-10-26 00:27:22.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/swagger-ui-bundle.js - 200 424767 text/javascript 25.4411ms
2025-10-26 00:27:22.732 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7283/swagger/v1/swagger.json - null null
2025-10-26 00:27:22.812 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7283/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.0851ms
2025-10-26 00:28:50.305 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7283/api/chat - application/json 88
2025-10-26 00:28:50.314 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14121: JWT is not a well formed JWE, there must be four dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-26 00:28:50.323 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14121: JWT is not a well formed JWE, there must be four dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-26 00:28:50.327 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-26 00:28:50.330 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-26 00:28:50.332 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7283/api/chat - 401 0 null 26.7783ms
2025-10-26 00:28:50.335 +02:00 [INF] Connection id "0HNGK2MJH53P8", Request id "0HNGK2MJH53P8:00000001": the application completed without reading the entire request body.
2025-10-26 00:29:19.499 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7283/api/chat - application/json 88
2025-10-26 00:29:19.502 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-26 00:29:19.503 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-26 00:29:19.505 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-26 00:29:19.506 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-26 00:29:19.507 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7283/api/chat - 401 0 null 8.2511ms
2025-10-26 00:30:27.572 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7283/health - null null
2025-10-26 00:30:27.577 +02:00 [INF] Executing endpoint 'Health checks'
2025-10-26 00:30:27.580 +02:00 [INF] Start processing HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:30:27.581 +02:00 [INF] Sending HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 00:30:27.707 +02:00 [INF] Received HTTP response headers after 125.0121ms - 200
2025-10-26 00:30:27.708 +02:00 [INF] End processing HTTP request after 128.586ms - 200
2025-10-26 00:30:27.714 +02:00 [INF] Executed endpoint 'Health checks'
2025-10-26 00:30:27.716 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7283/health - 200 null text/plain 144.0781ms
2025-10-26 00:31:41.226 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7283/api/chat - application/json 88
2025-10-26 00:31:41.237 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14120: JWT is not well formed, there is only one dot (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-26 00:31:41.240 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14120: JWT is not well formed, there is only one dot (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-26 00:31:41.241 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-26 00:31:41.242 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-26 00:31:41.243 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7283/api/chat - 401 0 null 16.5045ms
2025-10-26 00:31:41.245 +02:00 [INF] Connection id "0HNGK2MJH53P9", Request id "0HNGK2MJH53P9:00000001": the application completed without reading the entire request body.
2025-10-26 13:28:23.682 +01:00 [INF] Starting OmgekeerdeStemWijzer API
2025-10-26 13:28:24.008 +01:00 [INF] User profile is available. Using 'C:\Users\Msahi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 13:28:24.119 +01:00 [INF] Now listening on: http://localhost:8080
2025-10-26 13:28:24.122 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-26 13:28:24.123 +01:00 [INF] Hosting environment: Development
2025-10-26 13:28:24.124 +01:00 [INF] Content root path: C:\Users\Msahi\OneDrive\Documenten\OmgekeerdeStemWijzer\OmgekeerdeStemWijzer.Api
2025-10-26 13:28:43.180 +01:00 [INF] Application is shutting down...
2025-10-26 13:28:43.188 +01:00 [INF] Application shut down gracefully
2025-10-26 13:28:50.833 +01:00 [INF] Starting OmgekeerdeStemWijzer API
2025-10-26 13:28:51.077 +01:00 [INF] User profile is available. Using 'C:\Users\Msahi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 13:28:51.155 +01:00 [INF] Now listening on: http://localhost:8080
2025-10-26 13:28:51.159 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-26 13:28:51.160 +01:00 [INF] Hosting environment: Development
2025-10-26 13:28:51.161 +01:00 [INF] Content root path: C:\Users\Msahi\OneDrive\Documenten\OmgekeerdeStemWijzer\OmgekeerdeStemWijzer.Api
2025-10-26 13:29:00.868 +01:00 [INF] Application is shutting down...
2025-10-26 13:29:00.876 +01:00 [INF] Application shut down gracefully
2025-10-26 13:59:50.379 +01:00 [INF] Starting OmgekeerdeStemWijzer API
2025-10-26 13:59:50.595 +01:00 [INF] User profile is available. Using 'C:\Users\Msahi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 13:59:50.669 +01:00 [INF] Now listening on: http://localhost:5295
2025-10-26 13:59:50.672 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-26 13:59:50.673 +01:00 [INF] Hosting environment: Development
2025-10-26 13:59:50.673 +01:00 [INF] Content root path: C:\Users\Msahi\OneDrive\Documenten\OmgekeerdeStemWijzer\OmgekeerdeStemWijzer.Api
2025-10-26 13:59:54.521 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/ - null null
2025-10-26 13:59:54.559 +01:00 [WRN] Failed to determine the https port for redirect.
2025-10-26 13:59:54.599 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/ - 404 0 null 79.0198ms
2025-10-26 13:59:54.618 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/, Response status code: 404
2025-10-26 14:00:02.284 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/ - null null
2025-10-26 14:00:02.291 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/ - 404 0 null 8.0404ms
2025-10-26 14:00:02.293 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/, Response status code: 404
2025-10-26 14:00:07.482 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - null null
2025-10-26 14:00:07.598 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.7333ms
2025-10-26 14:01:28.455 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295//health - null null
2025-10-26 14:01:28.458 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:01:28.461 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295//health - 204 null null 5.6974ms
2025-10-26 14:01:28.464 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295//health - application/json null
2025-10-26 14:01:28.466 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:01:28.470 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295//health - 404 0 null 5.7982ms
2025-10-26 14:01:28.472 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295//health, Response status code: 404
2025-10-26 14:01:31.649 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295//health - application/json null
2025-10-26 14:01:31.652 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:01:31.653 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295//health - 404 0 null 4.8747ms
2025-10-26 14:01:31.657 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295//health, Response status code: 404
2025-10-26 14:01:44.291 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295//api/chat - null null
2025-10-26 14:01:44.292 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:01:44.293 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295//api/chat - 204 null null 2.4181ms
2025-10-26 14:01:44.296 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295//api/chat - application/json 73
2025-10-26 14:01:44.297 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:01:44.769 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295//api/chat - 404 0 null 473.5774ms
2025-10-26 14:01:44.771 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5295//api/chat, Response status code: 404
2025-10-26 14:02:25.504 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/chat - null null
2025-10-26 14:02:25.507 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:02:25.508 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/chat - 204 null null 4.1685ms
2025-10-26 14:02:25.511 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/chat - application/json 77
2025-10-26 14:02:25.514 +01:00 [INF] CORS policy execution successful.
2025-10-26 14:02:25.519 +01:00 [INF] Executing endpoint 'OmgekeerdeStemWijzer.Api.Controllers.ChatController.SendMessage (OmgekeerdeStemWijzer.Api)'
2025-10-26 14:02:25.536 +01:00 [INF] Route matched with {action = "SendMessage", controller = "Chat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessage(OmgekeerdeStemWijzer.Api.Models.ChatRequest) on controller OmgekeerdeStemWijzer.Api.Controllers.ChatController (OmgekeerdeStemWijzer.Api).
2025-10-26 14:02:26.548 +01:00 [INF] Initialized EmbeddingService with model: text-embedding-3-small
2025-10-26 14:02:26.553 +01:00 [INF] Initialized GroqService with default model: llama-3.1-8b-instant
2025-10-26 14:02:27.490 +01:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/embeddings
2025-10-26 14:02:27.494 +01:00 [INF] Sending HTTP request POST https://api.openai.com/v1/embeddings
2025-10-26 14:02:27.853 +01:00 [INF] Received HTTP response headers after 356.2129ms - 200
2025-10-26 14:02:27.855 +01:00 [INF] End processing HTTP request after 367.3747ms - 200
2025-10-26 14:02:27.893 +01:00 [INF] Start processing HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 14:02:27.893 +01:00 [INF] Sending HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections
2025-10-26 14:02:28.142 +01:00 [INF] Received HTTP response headers after 247.3246ms - 200
2025-10-26 14:02:28.142 +01:00 [INF] End processing HTTP request after 249.8564ms - 200
2025-10-26 14:02:28.151 +01:00 [INF] Start processing HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections/1b5638fe-2610-462f-92ab-60c1b8378eb8/query
2025-10-26 14:02:28.153 +01:00 [INF] Sending HTTP request POST https://omgekeerdestemwijzer-chromadb.onrender.com/api/v2/tenants/default_tenant/databases/default_database/collections/1b5638fe-2610-462f-92ab-60c1b8378eb8/query
2025-10-26 14:02:28.293 +01:00 [INF] Received HTTP response headers after 139.1803ms - 200
2025-10-26 14:02:28.295 +01:00 [INF] End processing HTTP request after 143.597ms - 200
2025-10-26 14:02:28.302 +01:00 [INF] Start processing HTTP request POST https://api.groq.com/openai/v1/chat/completions
2025-10-26 14:02:28.308 +01:00 [INF] Sending HTTP request POST https://api.groq.com/openai/v1/chat/completions
2025-10-26 14:02:28.543 +01:00 [INF] Received HTTP response headers after 233.9608ms - 401
2025-10-26 14:02:28.545 +01:00 [INF] End processing HTTP request after 243.4842ms - 401
2025-10-26 14:02:28.547 +01:00 [ERR] Groq API error 401: {"error":{"message":"Invalid API Key","type":"invalid_request_error","code":"invalid_api_key"}}

2025-10-26 14:02:28.747 +01:00 [INF] Executing OkObjectResult, writing value of type 'OmgekeerdeStemWijzer.Api.Models.ChatMessage'.
2025-10-26 14:02:28.758 +01:00 [INF] Executed action OmgekeerdeStemWijzer.Api.Controllers.ChatController.SendMessage (OmgekeerdeStemWijzer.Api) in 3216.259ms
2025-10-26 14:02:28.759 +01:00 [INF] Executed endpoint 'OmgekeerdeStemWijzer.Api.Controllers.ChatController.SendMessage (OmgekeerdeStemWijzer.Api)'
2025-10-26 14:02:28.760 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/chat - 200 null application/json; charset=utf-8 3248.6518ms
